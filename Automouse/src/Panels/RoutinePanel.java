package Panels;

import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import Constants.Constant;
import Constants.Language;
import Events.PlayEvent;
import Labels.NomalLabel;
import Setting.ButtonSetting;
import Setting.PanelSetting;

public class RoutinePanel extends PanelSetting{
	private static final long serialVersionUID = 1L;
	private RightSettingPanel RS;
	private int BoundY=1, DataNum, DataSize, Page=1;
	private NomalLabel pages;
	private ButtonSetting prev, next;
	private PlayEvent Play;

	public RoutinePanel(int x, int y, int width, int height, Color color, RightSettingPanel rightsetting) {
		super(x, y, width, height, color);
		this.RS = rightsetting;
	}
	
	public void View(PlayEvent play) { //FramePanel로 인해 항상 화면 갱신
		this.removeAll();
		Play = play;
		
		BoundY = 1; //각 버튼끼리 거리를 조절해 생성
		DataNum = (Page-1)*9; //데이타에 숫자를 정함. 버튼을 눌렀을때 그 데이터를 설정창으로 보내기 위함.
		
		prev = new ButtonSetting(Language.Language[Language.Lan.prev.ordinal()+Language.LSelect],"Prev",20,319,80,20); //이전 페이지 버튼
		prev.addActionListener(new myActionListener()); //이 설정은 페이지 하단에 프로그래밍함.
		
		next = new ButtonSetting(Language.Language[Language.Lan.next.ordinal()+Language.LSelect],"Next",149,319,80,20); //다음 페이지 버튼
		next.addActionListener(new myActionListener());
		
		pages = new NomalLabel(Integer.toString(Page), 119, 319, 20, 20); //페이지 숫자표시 label
		DataSize = Constant.data.size(); //현재 Routine 크기를 저장

		for(int i=(Page-1)*9; i<DataSize && i<Page*9; i++) { //(페이지-1)*9 부터 데이터를 불러와서 9개까지 화면에 표시
			ButtonSetting button = new ButtonSetting(Constant.data.elementAt(i).getName(),Integer.toString(DataNum), 1, BoundY, 248, 33);
			button.addActionListener(new myActionListener());
			if(play.isAlive() && i == play.getJ()) button.setBackground(new Color(223,223,223));
			this.add(button);
			DataNum++;
			BoundY += 34; //각 버튼끼리 떨어져있는 거리
		}
		
		this.add(pages);
		this.add(prev);
		this.add(next);
		this.repaint();
	}
	
	//버튼 설정
	class myActionListener implements ActionListener{

		@Override
		public void actionPerformed(ActionEvent e) {
			// TODO Auto-generated method stub
			try {
				switch(e.getActionCommand()) {
				
				case "Prev" : //이전페이지
					if(Page != 1) { Page--; View(Play);}
					break;
				case "Next" : //다음페이지
					if(Page < (DataSize/9)+1) { Page++; View(Play);}
					break;
					
				default :
					RS.onSee_Focus();
					RS.setData(Constant.data.elementAt(Integer.parseInt(e.getActionCommand())));
					RS.view();
					break;
				
				
				}
			}catch(Exception ex) {
				System.out.println(ex.getMessage());
			}
		}
	}
}
